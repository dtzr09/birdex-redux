{"ast":null,"code":"var _jsxFileName = \"/Users/dtzr/Documents/GitHub/birdex-redux/src/pages/EntriesPage.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport Nav from '../components/Navbar/Nav';\nimport { Icon, Menu, Table, Button, Modal, Input, Dropdown } from 'semantic-ui-react';\nimport './EntriesPageStyles.css';\nimport { useHistory } from 'react-router';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction EntriesPage({\n  match\n}) {\n  _s();\n\n  const data = match.params;\n  const ts = new Date();\n  const history = useHistory(); //State of modal that adds new entry\n\n  const [open, setOpen] = useState(false);\n  const [weightinput, setWeight] = useState(0);\n  const currentDate = ts.toLocaleDateString(\"en-US\") + ' ' + ts.toLocaleTimeString(\"en-US\"); //State of modal that updates entry\n\n  const [open2, setOpen2] = useState(false);\n  const [newWeight, setnewWeight] = useState('');\n  const [editId, seteditId] = useState(\"\"); //Server to add new entries\n\n  const newEntries = async e => {\n    if (weightinput <= 0) {\n      alert(\"Incorrect Weight Value!\");\n      setWeight(0);\n    } else {//create entry\n    }\n  };\n\n  const sendEntry = () => {\n    setOpen(false);\n    newEntries();\n  }; //Server to render entries\n\n\n  const [entry, setEntry] = useState([]);\n\n  const getbirdEntries = async () => {\n    try {\n      const response = await fetch(`/birds/${data.birdName}/${data.birdsid}/${data.species_name}/entries`);\n      const jsonData = await response.json();\n      setEntry(jsonData);\n    } catch (err) {\n      console.log(err.message);\n    }\n  };\n\n  useEffect(() => {\n    getbirdEntries();\n  }, []);\n  console.log(entry); //Server to delete entry\n  //Only allow to delete if there is more than one entry --> so there must be at least an entry in every bird\n\n  const deletebird = async id => {\n    try {\n      const deletebird = await fetch(`/birds/${data.birdName}/${data.birdsid}/${data.species_name}/entries`, {\n        method: \"DELETE\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          \"entry_id\": id\n        })\n      });\n      window.location.reload();\n    } catch (err) {\n      console.log(err.message);\n    }\n  };\n\n  const handleDelete = id => {\n    if (entry.length > 1) {\n      deletebird(id);\n    } else {\n      alert(\"You need to keep at least one entry!\");\n    }\n  }; //Server to update entry\n\n\n  const handleUpdate = id => {\n    setOpen2(!open2);\n    seteditId(id);\n    /* In order to make the current id that we clicked a global variable */\n  };\n\n  const onUpdate = async () => {\n    try {\n      const response = await fetch(`/birds/${data.birdName}/${data.birdsid}/${data.species_name}/entries`, {\n        method: \"PUT\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          \"id\": editId,\n          \"weight\": newWeight,\n          \"created_at\": currentDate\n        })\n      });\n    } catch (err) {\n      console.error(err.message);\n    }\n  };\n\n  const setUpdate = () => {\n    onUpdate();\n    history.push('/');\n  };\n\n  console.log(entry); //DISPLAYING ALL ENTRIES JSX\n\n  const entries = entry.map(details => {\n    return /*#__PURE__*/_jsxDEV(Table.Body, {\n      style: {\n        textAlign: \"center\"\n      },\n      children: /*#__PURE__*/_jsxDEV(Table.Row, {\n        className: \"EntriesTableRow\",\n        children: [/*#__PURE__*/_jsxDEV(Table.Cell, {\n          children: details.created_at\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(Table.Cell, {\n          children: details.weight\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(Table.Cell, {\n          children: /*#__PURE__*/_jsxDEV(Icon, {\n            className: \"edit-button\",\n            name: \"edit\",\n            size: \"big\",\n            onClick: () => handleUpdate(details.entry_id)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(Table.Cell, {\n          children: /*#__PURE__*/_jsxDEV(Icon, {\n            className: \"delete-button\",\n            name: \"delete\",\n            size: \"big\",\n            color: \"red\",\n            onClick: () => handleDelete(details.entry_id)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 9\n      }, this)\n    }, details.entry_id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 5\n    }, this);\n  }); //For the input field for weight\n\n  const options = [{\n    key: 'integer',\n    text: 'integer',\n    value: 'integer'\n  }, {\n    key: 'decimals',\n    text: 'decimals',\n    value: 'decimals'\n  }];\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"EntriesContainer\",\n    children: [/*#__PURE__*/_jsxDEV(Nav, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Table, {\n      celled: true,\n      className: \"EntriesTable\",\n      children: [/*#__PURE__*/_jsxDEV(Table.Header, {\n        children: /*#__PURE__*/_jsxDEV(Table.Row, {\n          style: {\n            textAlign: \"center\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(Table.HeaderCell, {\n            children: \"TimeStamp\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Table.HeaderCell, {\n            children: \"Weight\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Table.HeaderCell, {\n            children: \"Edit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Table.HeaderCell, {\n            children: \"Delete\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 11\n      }, this), entries, /*#__PURE__*/_jsxDEV(Table.Footer, {\n        children: /*#__PURE__*/_jsxDEV(Table.Row, {\n          children: /*#__PURE__*/_jsxDEV(Table.HeaderCell, {\n            colSpan: \"4\",\n            children: /*#__PURE__*/_jsxDEV(Menu, {\n              floated: \"right\",\n              pagination: true,\n              children: [/*#__PURE__*/_jsxDEV(Menu.Item, {\n                as: \"a\",\n                icon: true,\n                children: /*#__PURE__*/_jsxDEV(Icon, {\n                  name: \"chevron left\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 153,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 152,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Menu.Item, {\n                as: \"a\",\n                children: \"1\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 155,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Menu.Item, {\n                as: \"a\",\n                children: \"2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 156,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Menu.Item, {\n                as: \"a\",\n                children: \"3\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 157,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Menu.Item, {\n                as: \"a\",\n                children: \"4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 158,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Menu.Item, {\n                as: \"a\",\n                icon: true,\n                children: /*#__PURE__*/_jsxDEV(Icon, {\n                  name: \"chevron right\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 160,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 159,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 151,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 150,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      size: 'tiny',\n      onClose: () => setOpen(false),\n      onOpen: () => setOpen(true),\n      open: open,\n      trigger: /*#__PURE__*/_jsxDEV(Button, {\n        className: \"showmodal--button\",\n        children: \"Add New Entry\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 20\n      }, this),\n      children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n        children: \"Add New Entry\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Content, {\n        children: /*#__PURE__*/_jsxDEV(Modal.Description, {\n          children: /*#__PURE__*/_jsxDEV(Input, {\n            label: /*#__PURE__*/_jsxDEV(Dropdown, {\n              defaultValue: \"int\",\n              options: options\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 180,\n              columnNumber: 20\n            }, this),\n            labelPosition: \"right\",\n            placeholder: \"Enter weight\",\n            value: weightinput,\n            onChange: e => setWeight(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 179,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Actions, {\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          content: \"Add\",\n          labelPosition: \"right\",\n          icon: \"checkmark\",\n          onClick: sendEntry,\n          positive: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      size: 'tiny',\n      onClose: () => setOpen2(false),\n      onOpen: () => setOpen2(true),\n      open: open2,\n      children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n        children: \" Edit Entry\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Content, {\n        children: /*#__PURE__*/_jsxDEV(Modal.Description, {\n          children: /*#__PURE__*/_jsxDEV(Input, {\n            label: /*#__PURE__*/_jsxDEV(Dropdown, {\n              defaultValue: \"int\",\n              options: options\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 210,\n              columnNumber: 20\n            }, this),\n            labelPosition: \"right\",\n            placeholder: \"Enter weight\",\n            value: newWeight,\n            onChange: e => setnewWeight(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 209,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Actions, {\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          content: \"Add\",\n          labelPosition: \"right\",\n          icon: \"checkmark\",\n          onClick: setUpdate,\n          positive: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      onClick: () => history.goBack(),\n      content: \"Back\",\n      icon: \"left arrow\",\n      labelPosition: \"left\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 136,\n    columnNumber: 5\n  }, this);\n}\n\n_s(EntriesPage, \"tTywbN2ZNKCjreSGpRNJ0IYn0kE=\", false, function () {\n  return [useHistory];\n});\n\n_c = EntriesPage;\nexport default EntriesPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"EntriesPage\");","map":{"version":3,"sources":["/Users/dtzr/Documents/GitHub/birdex-redux/src/pages/EntriesPage.js"],"names":["React","useEffect","useState","Nav","Icon","Menu","Table","Button","Modal","Input","Dropdown","useHistory","EntriesPage","match","data","params","ts","Date","history","open","setOpen","weightinput","setWeight","currentDate","toLocaleDateString","toLocaleTimeString","open2","setOpen2","newWeight","setnewWeight","editId","seteditId","newEntries","e","alert","sendEntry","entry","setEntry","getbirdEntries","response","fetch","birdName","birdsid","species_name","jsonData","json","err","console","log","message","deletebird","id","method","headers","body","JSON","stringify","window","location","reload","handleDelete","length","handleUpdate","onUpdate","error","setUpdate","push","entries","map","details","textAlign","created_at","weight","entry_id","options","key","text","value","target","goBack"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport Nav from '../components/Navbar/Nav'\nimport { Icon, Menu, Table, Button, Modal, Input, Dropdown  } from 'semantic-ui-react'\nimport './EntriesPageStyles.css'\nimport { useHistory } from 'react-router'\n\n\nfunction EntriesPage({match}) {\n\n  const data = match.params\n  const ts = new Date();\n  const history = useHistory()\n\n  //State of modal that adds new entry\n  const [open, setOpen] = useState(false) \n  const [weightinput, setWeight] = useState(0);\n  const currentDate = ts.toLocaleDateString(\"en-US\") + ' ' + ts.toLocaleTimeString(\"en-US\")\n  \n  //State of modal that updates entry\n  const [open2, setOpen2] = useState(false)\n  const [newWeight, setnewWeight] = useState('')\n  const [editId, seteditId] = useState(\"\")\n\n  //Server to add new entries\n  const newEntries = async e => {\n    if (weightinput <= 0){\n      alert(\"Incorrect Weight Value!\")\n      setWeight(0)\n    } else {\n        //create entry\n      }\n    }\n\n    const sendEntry = () => {\n      setOpen(false)\n      newEntries()\n    }\n\n  //Server to render entries\n  const [entry, setEntry] = useState([])\n\n  const getbirdEntries = async() => {\n    try {\n      const response = await fetch(`/birds/${data.birdName}/${data.birdsid}/${data.species_name}/entries`)\n      const jsonData = await response.json()\n\n      setEntry(jsonData)\n    } catch (err) {\n      console.log(err.message)\n    }\n  }\n\n  useEffect(() => {\n      getbirdEntries()\n  },[])\n\n  console.log(entry)\n\n  //Server to delete entry\n  //Only allow to delete if there is more than one entry --> so there must be at least an entry in every bird\n  const deletebird = async(id) => {\n    try {\n      const deletebird = await fetch(`/birds/${data.birdName}/${data.birdsid}/${data.species_name}/entries`,{\n        method: \"DELETE\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          \"entry_id\": id\n        })\n      })\n      window.location.reload();\n    } catch (err) {\n      console.log(err.message)\n    }\n  }\n\n  const handleDelete = (id) => {\n    if(entry.length > 1){\n      deletebird(id)\n    }else{\n      alert(\"You need to keep at least one entry!\")\n    }\n  }\n\n  //Server to update entry\n  const handleUpdate = (id) => {\n    setOpen2(!open2)\n    seteditId(id) /* In order to make the current id that we clicked a global variable */\n  }\n\n  const onUpdate = async() => {\n    try {\n      const response = await fetch(`/birds/${data.birdName}/${data.birdsid}/${data.species_name}/entries`,\n        {\n          method: \"PUT\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify({\n            \"id\": editId,\n            \"weight\": newWeight,\n            \"created_at\": currentDate,\n          })\n        }\n      )\n    } catch (err) {\n      console.error(err.message);\n    }\n  };\n  \n  const setUpdate = () => {\n    onUpdate();\n    history.push('/')\n  }\n\n  console.log(entry)\n  //DISPLAYING ALL ENTRIES JSX\n  const entries = entry.map(details => {\n    return (\n    <Table.Body key={details.entry_id} style={{textAlign: \"center\" }}>\n        <Table.Row className =\"EntriesTableRow\">\n        <Table.Cell >{(details.created_at)}</Table.Cell>\n        <Table.Cell>{details.weight}</Table.Cell> \n        <Table.Cell><Icon className=\"edit-button\" name='edit' size='big' onClick={()=>handleUpdate(details.entry_id)}/></Table.Cell> \n        <Table.Cell><Icon className=\"delete-button\" name='delete' size='big' color=\"red\" onClick = {()=> handleDelete(details.entry_id)}/></Table.Cell> \n        </Table.Row>\n    </Table.Body>\n  )})\n\n  //For the input field for weight\n  const options = [\n    { key: 'integer', text: 'integer', value: 'integer' },\n    { key: 'decimals', text: 'decimals', value: 'decimals' },\n  ]\n\n  return (\n    <div className = \"EntriesContainer\">\n      <Nav/>\n        <Table celled className=\"EntriesTable\">\n          <Table.Header>\n            <Table.Row style={{textAlign: \"center\"}}> \n              <Table.HeaderCell>TimeStamp</Table.HeaderCell>\n              <Table.HeaderCell>Weight</Table.HeaderCell>\n              <Table.HeaderCell>Edit</Table.HeaderCell>\n              <Table.HeaderCell>Delete</Table.HeaderCell>\n            </Table.Row>\n          </Table.Header>\n          {entries}\n          <Table.Footer>\n            <Table.Row>\n              <Table.HeaderCell colSpan='4'>\n                  <Menu floated='right' pagination>\n                  <Menu.Item as='a' icon>\n                    <Icon name='chevron left' />\n                  </Menu.Item>\n                  <Menu.Item as='a'>1</Menu.Item>\n                  <Menu.Item as='a'>2</Menu.Item>\n                  <Menu.Item as='a'>3</Menu.Item>\n                  <Menu.Item as='a'>4</Menu.Item>\n                  <Menu.Item as='a' icon>\n                    <Icon name='chevron right' />\n                  </Menu.Item>\n                </Menu>\n              </Table.HeaderCell>\n            </Table.Row>\n          </Table.Footer>\n        </Table>\n\n        {/* Modal To Add New Entry*/}\n        <Modal\n          size={'tiny'}\n          onClose={() => setOpen(false)}\n          onOpen={() => setOpen(true)}\n          open={open}\n          trigger={<Button className=\"showmodal--button\">Add New Entry</Button>}\n        >\n        <Modal.Header>Add New Entry</Modal.Header>\n        <Modal.Content>\n          <Modal.Description>\n          <Input\n            label={<Dropdown defaultValue='int' options={options} />}\n            labelPosition='right'\n            placeholder='Enter weight'\n            value={weightinput}\n            onChange={e => setWeight(e.target.value)}\n          />\n          </Modal.Description>\n        </Modal.Content>\n        <Modal.Actions>\n          <Button\n            content=\"Add\"\n            labelPosition='right'\n            icon='checkmark'\n            onClick={sendEntry}\n            positive\n          />\n        </Modal.Actions>\n      </Modal>\n\n      {/* Modal To Update Entry */}\n      <Modal\n          size={'tiny'}\n          onClose={() => setOpen2(false)}\n          onOpen={() => setOpen2(true)}\n          open={open2}\n      >\n        <Modal.Header> Edit Entry</Modal.Header>\n        <Modal.Content>\n          <Modal.Description>\n          <Input\n            label={<Dropdown defaultValue='int' options={options} />}\n            labelPosition='right'\n            placeholder='Enter weight'\n            value={newWeight}\n            onChange={e => setnewWeight(e.target.value)}\n          />\n          </Modal.Description>\n        </Modal.Content>\n        <Modal.Actions>\n          <Button\n            content=\"Add\"\n            labelPosition='right'\n            icon='checkmark'\n            onClick={setUpdate}\n            positive\n          />\n        </Modal.Actions>\n      </Modal>\n\n      <Button onClick={()=>history.goBack()} content='Back' icon='left arrow' labelPosition='left' />\n\n    </div>\n  )\n}\n\nexport default EntriesPage\n"]},"metadata":{},"sourceType":"module"}