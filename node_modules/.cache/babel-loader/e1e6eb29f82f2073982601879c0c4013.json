{"ast":null,"code":"import _slicedToArray from\"/Users/dtzr/Documents/GitHub/birdex-redux/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{useHistory}from\"react-router\";import Nav from\"../components/Navbar/Nav\";import*as d3 from\"d3\";import{SingleBirdPageWrapper,SingleBirdContainer,SingleBirdWrapper,SingleBirdContent,SingleBirdName,SingleBirdSpecies,SingleBirdWeight,SingleBirdSex,ImageWrapper,SingleBirdImage,Backbutton,ViewEntries,DeleteBird,AnalysisContainer,VisualContainer,StatsContainer,StatsWrapper,Statsdetail,ChartContainer,ChartChangeH1Bar,ChartChangeH1Line}from\"./SingleBirdStyle\";import BarChart from\"../components/Charts/BarChart\";import LineChart from\"../components/Charts/LineChart\";import{useDispatch,useSelector}from\"react-redux\";import{deletebird}from\"../feature/BirdsSlice\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function SingleBird(_ref){var match=_ref.match;var birds=useSelector(function(state){return state.birds;});var history=useHistory();var dispatch=useDispatch();var i;var currentbird_img,currentbird_name,currentbird_id,currentbird_weights,currentbird_sex,currentbird_species,currentbird_speciesid;for(i=0;i<birds.length;i++){if(birds[i].name===match.params.name&&birds[i].id==match.params.birdsid){currentbird_img=birds[i].img;currentbird_name=birds[i].name;currentbird_id=birds[i].id;currentbird_weights=birds[i].weights;currentbird_sex=birds[i].sex;currentbird_species=birds[i].species;currentbird_speciesid=birds[i].species_id;}}// DELETING BIRD (FROM BIRDSDATA AND ENTRIES)\nvar deleteBird=function deleteBird(){dispatch(deletebird({id:currentbird_id}));history.push(\"/species/\".concat(currentbird_species));};// calculating the weights stats\nvar weights=Object.values(currentbird_weights.map(function(weights){return weights.weight;}));var stats={avg_weight:parseFloat(d3.mean(weights)).toFixed(2),min_weights:d3.min(weights),max_weights:d3.max(weights),median_weights:d3.median(weights),weights_dev:parseFloat(d3.deviation(weights)).toFixed(2)};// For the bar and line chart\nvar _useState=useState(false),_useState2=_slicedToArray(_useState,2),LineActive=_useState2[0],setLineActive=_useState2[1];var bardetails=[];var j;for(j=0;j<currentbird_weights.length;j++){bardetails.push({created_at:currentbird_weights[j].created_at,weight:currentbird_weights[j].weight});}return/*#__PURE__*/_jsxs(SingleBirdPageWrapper,{children:[/*#__PURE__*/_jsx(Nav,{}),/*#__PURE__*/_jsx(DeleteBird,{onClick:deleteBird,children:\" Delete Bird \"}),/*#__PURE__*/_jsxs(SingleBirdContainer,{children:[/*#__PURE__*/_jsxs(SingleBirdWrapper,{children:[/*#__PURE__*/_jsx(ImageWrapper,{children:/*#__PURE__*/_jsx(SingleBirdImage,{src:currentbird_img})}),/*#__PURE__*/_jsxs(SingleBirdContent,{children:[/*#__PURE__*/_jsx(SingleBirdName,{children:currentbird_name}),/*#__PURE__*/_jsxs(SingleBirdSpecies,{children:[\"Species: \",currentbird_species]}),/*#__PURE__*/_jsxs(SingleBirdSex,{children:[\"Sex: \",currentbird_sex]}),/*#__PURE__*/_jsxs(SingleBirdWeight,{children:[\"Average Weight: \",stats.avg_weight,\"g\"]})]})]}),/*#__PURE__*/_jsxs(AnalysisContainer,{children:[/*#__PURE__*/_jsx(StatsContainer,{children:/*#__PURE__*/_jsxs(StatsWrapper,{children:[/*#__PURE__*/_jsxs(Statsdetail,{children:[\"Average Weight: \",stats.avg_weight,\"g\"]}),/*#__PURE__*/_jsxs(Statsdetail,{children:[\"Minimum Weight: \",stats.min_weights,\"g\"]}),/*#__PURE__*/_jsxs(Statsdetail,{children:[\"Maximum Weight: \",stats.max_weights,\"g\"]}),/*#__PURE__*/_jsxs(Statsdetail,{children:[\"Median Weight: \",stats.median_weights,\"g\"]}),/*#__PURE__*/_jsxs(Statsdetail,{children:[\"Weight Deviation: \",stats.weights_dev,\"g\"]})]})}),/*#__PURE__*/_jsxs(VisualContainer,{children:[/*#__PURE__*/_jsx(ChartContainer,{children:LineActive?/*#__PURE__*/_jsx(LineChart,{data:bardetails}):/*#__PURE__*/_jsx(BarChart,{data:bardetails})}),LineActive?/*#__PURE__*/_jsx(ChartChangeH1Bar,{LineActive:true,onClick:function onClick(){return setLineActive(false);},children:\"Bar Chart\"}):/*#__PURE__*/_jsx(ChartChangeH1Line,{LineActive:true,onClick:function onClick(){return setLineActive(true);},children:\"Line Chart\"})]})]})]},currentbird_id),/*#__PURE__*/_jsx(Backbutton,{onClick:function onClick(){return history.goBack();},children:\" Back \"}),/*#__PURE__*/_jsx(ViewEntries,{to:\"/birds/\".concat(currentbird_name,\"/\").concat(currentbird_id,\"/\").concat(currentbird_species,\"/entries\"),children:\"View Entries\"})]});}export default SingleBird;","map":{"version":3,"sources":["/Users/dtzr/Documents/GitHub/birdex-redux/src/pages/SingleBird.js"],"names":["React","useEffect","useState","useHistory","Nav","d3","SingleBirdPageWrapper","SingleBirdContainer","SingleBirdWrapper","SingleBirdContent","SingleBirdName","SingleBirdSpecies","SingleBirdWeight","SingleBirdSex","ImageWrapper","SingleBirdImage","Backbutton","ViewEntries","DeleteBird","AnalysisContainer","VisualContainer","StatsContainer","StatsWrapper","Statsdetail","ChartContainer","ChartChangeH1Bar","ChartChangeH1Line","BarChart","LineChart","useDispatch","useSelector","deletebird","SingleBird","match","birds","state","history","dispatch","i","currentbird_img","currentbird_name","currentbird_id","currentbird_weights","currentbird_sex","currentbird_species","currentbird_speciesid","length","name","params","id","birdsid","img","weights","sex","species","species_id","deleteBird","push","Object","values","map","weight","stats","avg_weight","parseFloat","mean","toFixed","min_weights","min","max_weights","max","median_weights","median","weights_dev","deviation","LineActive","setLineActive","bardetails","j","created_at","goBack"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useHistory } from \"react-router\";\nimport Nav from \"../components/Navbar/Nav\";\nimport * as d3 from \"d3\";\nimport {\n  SingleBirdPageWrapper,\n  SingleBirdContainer,\n  SingleBirdWrapper,\n  SingleBirdContent,\n  SingleBirdName,\n  SingleBirdSpecies,\n  SingleBirdWeight,\n  SingleBirdSex,\n  ImageWrapper,\n  SingleBirdImage,\n  Backbutton,\n  ViewEntries,\n  DeleteBird,\n  AnalysisContainer,\n  VisualContainer,\n  StatsContainer,\n  StatsWrapper,\n  Statsdetail,\n  ChartContainer,\n  ChartChangeH1Bar,\n  ChartChangeH1Line,\n} from \"./SingleBirdStyle\";\nimport BarChart from \"../components/Charts/BarChart\";\nimport LineChart from \"../components/Charts/LineChart\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { deletebird } from \"../feature/BirdsSlice\";\n\nfunction SingleBird({ match }) {\n  const birds = useSelector((state) => state.birds);\n  const history = useHistory();\n  const dispatch = useDispatch();\n\n  let i;\n  let currentbird_img,\n    currentbird_name,\n    currentbird_id,\n    currentbird_weights,\n    currentbird_sex,\n    currentbird_species,\n    currentbird_speciesid;\n\n  for (i = 0; i < birds.length; i++) {\n    if (\n      birds[i].name === match.params.name &&\n      birds[i].id == match.params.birdsid\n    ) {\n      currentbird_img = birds[i].img;\n      currentbird_name = birds[i].name;\n      currentbird_id = birds[i].id;\n      currentbird_weights = birds[i].weights;\n      currentbird_sex = birds[i].sex;\n      currentbird_species = birds[i].species;\n      currentbird_speciesid = birds[i].species_id;\n    }\n  }\n\n  // DELETING BIRD (FROM BIRDSDATA AND ENTRIES)\n  const deleteBird = () => {\n    dispatch(\n      deletebird({\n        id: currentbird_id,\n      })\n    );\n    history.push(`/species/${currentbird_species}`);\n  };\n\n  // calculating the weights stats\n  const weights = Object.values(\n    currentbird_weights.map((weights) => weights.weight)\n  );\n\n  const stats = {\n    avg_weight: parseFloat(d3.mean(weights)).toFixed(2),\n    min_weights: d3.min(weights),\n    max_weights: d3.max(weights),\n    median_weights: d3.median(weights),\n    weights_dev: parseFloat(d3.deviation(weights)).toFixed(2),\n  };\n\n  // For the bar and line chart\n  const [LineActive, setLineActive] = useState(false);\n  const bardetails = [];\n  let j;\n  for (j = 0; j < currentbird_weights.length; j++) {\n    bardetails.push({\n      created_at: currentbird_weights[j].created_at,\n      weight: currentbird_weights[j].weight,\n    });\n  }\n\n  return (\n    <SingleBirdPageWrapper>\n      <Nav />\n\n      <DeleteBird onClick={deleteBird}> Delete Bird </DeleteBird>\n\n      <SingleBirdContainer key={currentbird_id}>\n        <SingleBirdWrapper>\n          <ImageWrapper>\n            <SingleBirdImage src={currentbird_img} />\n          </ImageWrapper>\n          <SingleBirdContent>\n            <SingleBirdName>{currentbird_name}</SingleBirdName>\n            <SingleBirdSpecies>\n              Species: {currentbird_species}\n            </SingleBirdSpecies>\n            <SingleBirdSex>Sex: {currentbird_sex}</SingleBirdSex>\n            <SingleBirdWeight>\n              {/* Will be using calculated average weight */}\n              Average Weight: {stats.avg_weight}g\n            </SingleBirdWeight>\n          </SingleBirdContent>\n        </SingleBirdWrapper>\n\n        <AnalysisContainer>\n          <StatsContainer>\n            <StatsWrapper>\n              <Statsdetail>Average Weight: {stats.avg_weight}g</Statsdetail>\n              <Statsdetail>Minimum Weight: {stats.min_weights}g</Statsdetail>\n              <Statsdetail>Maximum Weight: {stats.max_weights}g</Statsdetail>\n              <Statsdetail>Median Weight: {stats.median_weights}g</Statsdetail>\n              <Statsdetail>Weight Deviation: {stats.weights_dev}g</Statsdetail>\n            </StatsWrapper>\n          </StatsContainer>\n\n          <VisualContainer>\n            <ChartContainer>\n              {LineActive ? (\n                <LineChart data={bardetails} />\n              ) : (\n                <BarChart data={bardetails} />\n              )}\n            </ChartContainer>\n\n            {LineActive ? (\n              <ChartChangeH1Bar LineActive onClick={() => setLineActive(false)}>\n                Bar Chart\n              </ChartChangeH1Bar>\n            ) : (\n              <ChartChangeH1Line LineActive onClick={() => setLineActive(true)}>\n                Line Chart\n              </ChartChangeH1Line>\n            )}\n          </VisualContainer>\n        </AnalysisContainer>\n      </SingleBirdContainer>\n\n      <Backbutton onClick={() => history.goBack()}> Back </Backbutton>\n      <ViewEntries\n        to={`/birds/${currentbird_name}/${currentbird_id}/${currentbird_species}/entries`}\n      >\n        View Entries\n      </ViewEntries>\n    </SingleBirdPageWrapper>\n  );\n}\n\nexport default SingleBird;\n"]},"metadata":{},"sourceType":"module"}