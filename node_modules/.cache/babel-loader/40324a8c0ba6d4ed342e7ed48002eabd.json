{"ast":null,"code":"import { createSlice, current } from \"@reduxjs/toolkit\";\n\n//Show individual birds\nconst initialState = [{\n  id: 1,\n  species_id: 1,\n  name: \"Tom\",\n  sex: \"M\",\n  species: \"American Robin\",\n  weights: [{\n    weight: \"20\",\n    created_at: \"1/1/2000\"\n  }, {\n    weight: \"50\",\n    created_at: \"1/2/2000\"\n  }, {\n    weight: \"80\",\n    created_at: \"1/3/2000\"\n  }],\n  img: \"https://www.allaboutbirds.org/guide/assets/photo/59858031-480px.jpg\"\n}, {\n  id: 2,\n  species_id: 1,\n  name: \"Mary\",\n  sex: \"M\",\n  species: \"American Robin\",\n  weights: [{\n    weight: \"20\",\n    created_at: \"1/1/2000\"\n  }],\n  img: \"https://www.allaboutbirds.org/guide/assets/photo/303441871-240px.jpg\"\n}, {\n  id: 3,\n  species_id: 1,\n  name: \"John\",\n  sex: \"M\",\n  species: \"American Robin\",\n  weights: [{\n    weight: \"20\",\n    created_at: \"1/1/2000\"\n  }],\n  img: \"https://www.allaboutbirds.org/guide/assets/photo/60412921-1280px.jpg\"\n}, {\n  id: 4,\n  species_id: 1,\n  name: \"Harry\",\n  sex: \"M\",\n  species: \"American Robin\",\n  weights: [{\n    weight: \"25\",\n    created_at: \"1/1/2000\"\n  }],\n  img: \"https://www.allaboutbirds.org/guide/assets/photo/60412941-240px.jpg\"\n}];\nconst entriesSlice = createSlice({\n  name: \"entries\",\n  initialState,\n  reducers: {\n    addWeights: (state = initialState, action) => {\n      const newWeight = {\n        weight: action.payload.weight.toString(),\n        created_at: new Date(Date.now()).toLocaleString().split(\",\")[0]\n      };\n\n      // const updatedState = state.map((entry, index) => {\n      //   if (\n      //     action.payload.species_name === entry.species &&\n      //     action.payload.name === entry.name\n      //   ) {\n      //     return {\n      //       ...state[index],\n      //       weights: [...state[index].weights, newWeight],\n      //     };\n      //   }\n      // });\n      // return { ...state, updatedState };\n      const {\n        species_name,\n        name,\n        weight\n      } = action.payload;\n      const entryToUpdate = state.find(entry => entry.species === species_name && entry.name === name);\n      if (entryToUpdate) {\n        // Create a new weight entry and add it to the weights array of the found entry\n        const newWeight = {\n          weight: weight.toString(),\n          created_at: new Date(Date.now()).toLocaleString().split(\",\")[0]\n        };\n        entryToUpdate.weights.push(newWeight);\n      }\n    }\n  }\n});\nexport const {\n  addWeights\n} = entriesSlice.actions;\n\n//export posts reducer function so that it can be imported into store.js\nexport default entriesSlice.reducer;","map":{"version":3,"names":["createSlice","current","initialState","id","species_id","name","sex","species","weights","weight","created_at","img","entriesSlice","reducers","addWeights","state","action","newWeight","payload","toString","Date","now","toLocaleString","split","species_name","entryToUpdate","find","entry","push","actions","reducer"],"sources":["/Users/dtzr/Desktop/Projects/birdex-redux-master/src/feature/EntriesSlice.js"],"sourcesContent":["import { createSlice, current } from \"@reduxjs/toolkit\";\n\n//Show individual birds\nconst initialState = [\n  {\n    id: 1,\n    species_id: 1,\n    name: \"Tom\",\n    sex: \"M\",\n    species: \"American Robin\",\n    weights: [\n      {\n        weight: \"20\",\n        created_at: \"1/1/2000\",\n      },\n      {\n        weight: \"50\",\n        created_at: \"1/2/2000\",\n      },\n      {\n        weight: \"80\",\n        created_at: \"1/3/2000\",\n      },\n    ],\n    img: \"https://www.allaboutbirds.org/guide/assets/photo/59858031-480px.jpg\",\n  },\n  {\n    id: 2,\n    species_id: 1,\n    name: \"Mary\",\n    sex: \"M\",\n    species: \"American Robin\",\n    weights: [\n      {\n        weight: \"20\",\n        created_at: \"1/1/2000\",\n      },\n    ],\n    img: \"https://www.allaboutbirds.org/guide/assets/photo/303441871-240px.jpg\",\n  },\n  {\n    id: 3,\n    species_id: 1,\n    name: \"John\",\n    sex: \"M\",\n    species: \"American Robin\",\n    weights: [\n      {\n        weight: \"20\",\n        created_at: \"1/1/2000\",\n      },\n    ],\n    img: \"https://www.allaboutbirds.org/guide/assets/photo/60412921-1280px.jpg\",\n  },\n  {\n    id: 4,\n    species_id: 1,\n    name: \"Harry\",\n    sex: \"M\",\n    species: \"American Robin\",\n    weights: [\n      {\n        weight: \"25\",\n        created_at: \"1/1/2000\",\n      },\n    ],\n    img: \"https://www.allaboutbirds.org/guide/assets/photo/60412941-240px.jpg\",\n  },\n];\n\nconst entriesSlice = createSlice({\n  name: \"entries\",\n  initialState,\n  reducers: {\n    addWeights: (state = initialState, action) => {\n      const newWeight = {\n        weight: action.payload.weight.toString(),\n        created_at: new Date(Date.now()).toLocaleString().split(\",\")[0],\n      };\n\n      // const updatedState = state.map((entry, index) => {\n      //   if (\n      //     action.payload.species_name === entry.species &&\n      //     action.payload.name === entry.name\n      //   ) {\n      //     return {\n      //       ...state[index],\n      //       weights: [...state[index].weights, newWeight],\n      //     };\n      //   }\n      // });\n      // return { ...state, updatedState };\n      const { species_name, name, weight } = action.payload;\n      const entryToUpdate = state.find(\n        (entry) => entry.species === species_name && entry.name === name\n      );\n\n      if (entryToUpdate) {\n        // Create a new weight entry and add it to the weights array of the found entry\n        const newWeight = {\n          weight: weight.toString(),\n          created_at: new Date(Date.now()).toLocaleString().split(\",\")[0],\n        };\n\n        entryToUpdate.weights.push(newWeight);\n      }\n    },\n  },\n});\n\nexport const { addWeights } = entriesSlice.actions;\n\n//export posts reducer function so that it can be imported into store.js\nexport default entriesSlice.reducer;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}